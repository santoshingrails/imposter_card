<!DOCTYPE html>
<html lang="en">
<head>
    <script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
import { getFirestore, doc, collection, addDoc, getDocs, getDoc, setDoc } from 'https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js';

 const firebaseConfig = {
    apiKey: "AIzaSyDrEH7vrQgV9uuNmb3U4Y1K63UbSCiavVc",
    authDomain: "imposter-card.firebaseapp.com",
    projectId: "imposter-card",
    storageBucket: "imposter-card.appspot.com",
    messagingSenderId: "796820224242",
    appId: "1:796820224242:web:7373689c9cedef3849b86b",
    measurementId: "G-NDDKGCFPTD"
 };

 const app = initializeApp(firebaseConfig);
 const db = getFirestore(app);


let nameInput = ''; // Variable to store the name input

// Function to submit name to Firestore
document.getElementById("submitName").addEventListener("click", async function() {
    const nameInput = document.getElementById("nameInput").value.trim();
    if (nameInput !== "") {
        try {
            // Use nameInput as the document ID
            await setDoc(doc(db, "users", nameInput), {
                name: nameInput,
                value: ""
            });
            console.log("Name submitted:", nameInput);
            // Hide the input field and submit button
            document.getElementById("nameInput").style.display = "none";
            document.getElementById("submitName").style.display = "none";
            document.getElementById("enter_your_name").style.display = "none";
            // Show the "Show the word" button
            document.getElementById("showButton").style.display = "block";
        } catch (error) {
            console.error("Error adding document: ", error);
        }
    } else {
        console.error("Name cannot be empty!");
    }
});

// Function to fetch data from a collection and display it
document.getElementById("showButton").addEventListener("click", async function() {
    const nameInput = document.getElementById("nameInput").value.trim();
    if (nameInput !== "") {
        try {
            const docRef = doc(db, "users", nameInput);
            const docSnap = await getDoc(docRef);
            if (docSnap.exists()) {
                const name = docSnap.data().value;
                console.log("Name:", name);
                displayNames([name]);
            } else {
                console.log("Document not found");
                displayNames([]);
            }
        } catch (error) {
            console.error("Error fetching document:", error);
            displayNames([]);
        }
    } else {
        console.error("Name cannot be empty!");
        displayNames([]);
    }
});

// Function to display names in the DOM
function displayNames(names) {
    const documentContent = document.getElementById("documentContent");
    documentContent.innerHTML = "";
    names.forEach(name => {
        const nameElement = document.createElement("div");
        nameElement.textContent = name;
        documentContent.appendChild(nameElement);
    });
}

    </script>
    <meta charset="UTF-8">
    <title>Compose App</title>
    <script type="application/javascript" src="skiko.js"></script>
    <script type="application/javascript" src="composeApp.js"></script>
    <style>
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh; /* Full viewport height */
            margin: 0; /* Remove default margin */
        }


    </style>
</head>
<body>

<label for="nameInput" id="enter_your_name" style="margin-bottom: 5px" >Enter your name:</label>
<input type="text" id="nameInput">
<button id="submitName" style="margin-top: 80px">Submit</button>

<div id="documentContent" style="text-align: center;"></div>

<button id="showButton" style="display:none; margin-top: 80px">Show the word</button>
<canvas id="ComposeTarget"></canvas>
</body>
</html>
